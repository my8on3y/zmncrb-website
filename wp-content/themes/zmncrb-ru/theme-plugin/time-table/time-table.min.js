/*!
 * time-table.min.js 
 * Version - 1.0.0
 * Licensed under the MIT license - http://opensource.org/licenses/MIT
 *
 * Copyright (c) 2018 zmncrb.ru
 */

$(function () {
    $(document).ready(function () {
        $('#tt_filter_doclist').on('input', function(){
            var target = $('#tt_filter_doclist').val();
            var keyVal = $('.doc_query_list li');
                keyVal.map(function(){
                    if($(this).text().indexOf(target) == -1 ){
                        $(this).css({'display' : 'none'});                        
                    } else {
                        $(this).css({'display' : 'block'}).get();
                    }

                });
            });
    });

    $(document).ready(function () {
        $('.doc_link_ajax').on('click', function () {
            var ajaxQuery = $(this).attr("queryVal");
            var docName = $(this).text();
            var docSpecialty = $(this).attr("specialty");
            $('#tt_doc_name').text(docName);
            $('#tt_doc_specialty').text(docSpecialty);
            $.ajax({
                type: 'POST',
                url: ajaxPathUrl,
                data: {
                    myQw: ajaxQuery
                },
                success: function (data) {
                    var queryArr = [];
                    queryArr = JSON.parse(data);
                    $.each(queryArr, function (key, value) {
                        $('#tt_hourstart' + key).animateNumber({ number: value.start_hour });
                        if(value.start_minute!=='00') {$('#tt_minutestart' + key).animateNumber({ number: value.start_minute });} 
                        else {$('#tt_minutestart' + key).text(value.start_minute);};
                        $('#tt_hourend' + key).animateNumber({ number: value.end_hour });
                        if(value.end_minute!=='00') {$('#tt_minuteend' + key).animateNumber({ number: value.end_minute });} 
                        else {$('#tt_minuteend' + key).text(value.end_minute);};
                    });

                }
            });
        });
    });
});